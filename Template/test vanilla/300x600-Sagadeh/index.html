<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="ad.size" content="width=300, height=600">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-sanitize.js"></script>
	<script src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
	<link rel="stylesheet" type="text/css" href="https://s0.2mdn.net/creatives/assets/3915781/adlib.css">
	<script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.2.4_min.js"></script>
	<script src="https://s0.2mdn.net/creatives/assets/3915781/SplitText.min.js"></script>
	<script src="https://s0.2mdn.net/creatives/assets/3915781/adlibUtils-v3.js"></script>
	<style type="text/css">
		p{
			margin: 0 auto;
		}
        @font-face {
          font-family: VMCircularNatter-Medium;
          src: url("VMCircularNatter-Medium.woff") format("woff");
        }
        @font-face {
          font-family: VMCircularShout-Bold;
          src: url("VMCircularShout-Bold.woff") format("woff");
        }
        @font-face {
          font-family: VMCircularYell-Black;
          src: url("VMCircularYell-Black.woff") format("woff");
        }
		#main {
			position: absolute;
			top: 0;
			left: 0;
			border: 1px solid #000;
			box-sizing: border-box;
			overflow: hidden;
            background-color: rgb(255, 0, 0);
		}
        .adSize{
			position: absolute;
			top: 0;
			left: 0;
			width: 300px;
			height: 600px;
			object-fit: contain;
		}
        .aligned-v-h-centered {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #frame1Headline-wrapper {
            position: absolute;
            margin: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1000px;
            top: 297px;
            left: 0;
            right: 0;
            width: 246px;
            height: 130px;
        }
        #frame1Headline {
            position: absolute;
            top: 0px;
            left: 0px;
            width: auto;
            height: auto;
            font-family: VMCircularYell-Black;
            font-size: 30px;
            letter-spacing: -0.9px;
            line-height: 30px;
            color: rgb(255, 255, 255);
        }
        #frame2Headline-wrapper {
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            top: 18px;
            left: 25px;
            width: 237px;
            height: 120px;
        }
        #frame2Headline {
            position: absolute;
            top: 0px;
            left: 0px;
            width: auto;
            height: auto;
            text-align: left;
            font-size: 35px;
            font-family: VMCircularShout-Bold;
            letter-spacing: -1.05px;
            line-height: 35px;
            color: rgb(255, 255, 255);
        }
        #logo-wrapper {
            position: absolute;
            top: 501px;
            left: 150px;
            width: 123px;
            height: 72px;
        }
        #logo {
            position: absolute;
            width: inherit;
            height: inherit;
        }
        #cta-wrapper {
            position: absolute;
            top: 460px;
            left: 29px;
            width: 100px;
            height: 28px;
            border-radius: 14px;
            background: rgb(49,34,49);
            perspective: 1000px;
        }
        #ctaText {
            width: auto;
            height: auto;
            font-family: VMCircularNatter-Medium;
            font-size: 14px;
            letter-spacing: -0.03em;
            line-height: 25px;
            text-align: center;
            color: rgb(255, 255, 255);
        }
        #legal-btn-wrapper {
            position: absolute;
            top: 562px;
            left: 27px;
            width: 70px;
            height: 20px;
            cursor: pointer;
        }
        #legalButton {
            position: absolute;
            left: 0px;
            width: auto;
            height: auto;
            font-family: VMCircularShout-Bold;
            font-size: 10px;
            color: rgb(255, 255, 255);
        }
        #legal-text-wrapper {
            position: absolute;
            bottom: -84px;
            width: 300px;
            height: 84px;
            background: white;
            perspective: 1000px;
        }
        #legal {
            width: 280px;
            height: 65x;
            font-size: 9px;
            font-family: VMCircularNatter-Medium;
        }
        #close {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 8px;
            font-family: VMCircularNatter-Medium;
        }
        #legal-close-btn {
            position: absolute;
            top: 0px;
            right: 0px;
            width: 50px;
            height: 20px;
            cursor: pointer;
        }
		#taparea {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			cursor: pointer;
		}
        .blue {
            color: blue;
        }
	</style>
</head>
<body>
	<div id="main" ng-app="adlibApp" ng-controller="adlibCtrl" ng-style="adSize">
        <!--FRAME 1-->
        <div id=frame1Image-wrapper ng-style="adSize">
            <img id="frame1Image" src="frame1Image.png" ng-style="adSize">
        </div>
        <div id=frame1Headline-wrapper>
            <div id="frame1Headline"></div>
        </div>
        <!--FRAME 2-->
        <div id=frame2Image-wrapper ng-style="adSize">
            <img id="frame2Image" src="frame2Image.png" ng-style="adSize">
        </div>
        <div id=frame2Image2-wrapper ng-style="adSize">
            <img id="frame2Image2" src="frame2Image2.png" ng-style="adSize">
        </div>
        <div id=frame2Headline-wrapper>
            <div id="frame2Headline"></div>
        </div>
        <!--LOGO-->
        <div id=logo-wrapper>
            <img id="logo" src="logo.png">
        </div>
        <!--CTA-->
        <div id=cta-wrapper class="aligned-v-h-centered">
            <div id="ctaText">Shop now</div>
        </div>
		<div id="taparea" ng-click="clickTag()"></div>
        <!--LEGAL-->
        <div id=legal-btn-wrapper class="aligned-v-h-centered">
            <div id="legalButton">Legal stuff&nbsp; ^</div>
        </div>
        <div id="legal-text-wrapper" class="aligned-v-h-centered">
            <div id="legal">Virgin legal text</div>
            <div id="close">CLOSE X</div>
            <div id="taparea" ng-click="clickTag()"></div>
            <div id="legal-close-btn"></div>
        </div>
	</div>

	<script>
        //ng-bind-html="dynamic('frame1Headline')"
        //ng-bind-html="dynamic('frame2Headline')"
        "use strict"
        var defaultValues = {
            frame1Headline:"Our lowest<br> ever prices this<br> <span style='color: #000000'>Black Friday</span>",
            frame2Headline:"Lightning-fast<br> and reliable<br> broadband",
            landingPage:"https://www.google.com"
        }
        console.log("fruits")
        var fruits = ["apple", "orange", "cherry"];
        
        /*angular*/
        var dynamicElement;
        var app = angular.module("adlibApp", ['ngSanitize']);
        app.controller("adlibCtrl", function($scope) {
          $scope.dynamic = function(el) {
              //console.log("11111111")
              dynamicElement = el;
              //dynElem.forEach(populate);
              populate();
              //console.log(dynamicElement,"_dynamicElement");
              return defaultValues[el];
          },
          $scope.clickTag = function() {
            console.log("dsdsdsd")
            Enabler.exitOverride("Clickthrough", defaultValues.landingPage);
          },
          $scope.adSize = {
            "position" : "absolute",
            "width" : "300px",
            "height" : "600px",
          }
          $scope.dynamic();
        });
        /*angular*/
        
		function invocationCode() {
			// paste studio Invocation code from studio profile should be here
			
		}


		function initDynamic() {

			try{!Enabler.isServingInLiveEnvironment() ? (Object.keys(defaultValues).forEach((platform) => {console.log(defaultValues[platform]),defaultValues[platform];})):(
				invocationCode(),
				Object.keys(defaultValues).forEach((studio) => {
					if (imgKeywordArr.some(word => studio.indexOf(word) > -1) || vidKeywordArr.some(word => studio.indexOf(word) > -1) || audioKeywordArr.some(word => studio.indexOf(word) > -1) || landingPageArr.some(word => studio.indexOf(word) > -1)) {
						try{
		    				//replace 'your_feedName_here' with an actual feed | e.g Clinique_Remarketing_Q1_Remarketing_Q1_Refresh
		    				defaultValues[studio] = dynamicContent.romeltest_feed_300x600[0][studio].Url; 
		    			}catch(Error){}	
		    		}else{
			    			//replace 'your_feedName_here' with an actual feed | e.g Clinique_Remarketing_Q1_Remarketing_Q1_Refresh
			    			defaultValues[studio] = dynamicContent.romeltest_feed_300x600[0][studio];
			    		}
			    	})
				);}catch(Error){}	
		}


		function populate(item, index) {
            console.log("start populate");
            //var defaultValues = angular.element(document.getElementById('main')).scope().defaultValues;
            //console.log(defaultValues,"_dynamicElement")
            //console.log(Object.keys(defaultValues)[0],"_bbbb")
            if(item == undefined) return;
            console.log(item,"_item");
            console.log(index,"_index");
            var dynamicValues = Object.keys(defaultValues);
            //console.log(Object.keys(defaultValues),"_XXXZZZZZ")
            
            //var email = ['frame1Headline_text', 'frame1Headline_img'];
            var dynamic = dynamicValues[index].substring(dynamicValues[index].indexOf('_') + 1);
            console.log(dynamic,"_vvvv");
            if(dynamic == "text") document.querySelector("#frame1Headline").innerHTML = defaultValues.frame1Headline_text;
            
            


            //console.log(dynamic,"_vvvv"); // gmail.com
            //document.querySelector("#frame1Headline").innerHTML = defaultValues.frame1Headline;
            //document.querySelector("#frame2Headline").innerHTML = defaultValues.frame2Headline;
            //automated assignment of defaultvalues to text element
    
            
            //Our lowest<br> ever prices this<br> <span style="color: #000000">Black Friday</span>
            //Our lowest<br> ever prices this<br> <span style="color: #000000">Black Friday</span>
            
            //console.log(el,"_PPPPPPP");
            //if(type == "text") {
            //var dvTxts = defaultValues[el];
            //document.getElementById(el).innerHTML = defaultValues.frame1Headline;
            //}
            //console.log(defaultValues"xxxx");
            //var dynamicValue = dynamicElement.toString();
            //var dvImgs = defaultValues[];
            //console.log(dynamicValue);
            //
			//automated assignment of defaultvalues to img element
			/*document.querySelectorAll(".adlib-img").forEach(img => {
				var dvImgs = defaultValues[img.id.replace(/_dyn/g, "")];
				document.getElementById(img.id).src = dvImgs;
			});*/

            //document.getElementById(txt.id).innerHTML 
            
		    //automated assignment of defaultvalues to text element
		    
		    //manual assignment of other default values susch as background color, etc.
		    //document.querySelector("#bgColor_elem").style.backgroundColor = defaultValues.bgColor; 
		    //document.querySelector("#bgMask1_elem").style.backgroundColor = defaultValues.bgMask1;  
            //document.querySelector("#frame1Headline").innerHTML = $scope.defaultValues.frame1Headline;
            
            
            //var dvImgs = defaultValues.frame1Headline; //working
            //var dynamic = defaultValues[el];
            //console.log(dyn)
           
		}


		window.gwd = window.gwd || {};

        //Tool Play and Pause
        gwd.auto_PauseBtnClick = function (event) {
        	gsap.globalTimeline.pause(); 
        	console.log("Pause Timeline");
        };
        gwd.auto_PlayBtnClick = function (event) {
        	gsap.globalTimeline.resume(); 
        	console.log("Play Timeline");
        };


        //* * * * * * * * ALL ANIMATION RELATED CODE SHOULD START HERE * * * * * * * 

        // set initial position of your elements here
        gsap.set(["#main"], {visibility: "hidden"});
        gsap.globalTimeline.pause();

        function init() {
		    // templateCSS(defaultValues.cssAttrib); 
		    adlibStart();
		    //populate();
            Object.keys(defaultValues).forEach(populate);
            //fruits.forEach(populate);
            startAnimation();
            eventListeners();
		}
		function startAnimation() {
			console.log("animation initialized")

			/*document.querySelector("#taparea").addEventListener("click", function(){
				Enabler.exitOverride("Clickthrough", defaultValues.landingPage);
			});*/

			gsap.globalTimeline.resume();
            
            var tl = gsap.timeline({onComplete: adlibEnd});
            //FRAME 1 ANIMATION
            tl.to("#main", {duration: 0.5, visibility: "visible"})
              .from("#frame1Headline", {duration: 0.5, opacity: 0, force3D: false, onComplete: takeScreenshot})
              .to("#frame1Image, #frame1Headline", {duration: 0.5, opacity: 0},'+=2')
            //FRAME 2 ANIMATION
              .from("#frame2Headline", {duration: 0.5, opacity: 0, force3D: false})
              .from("#frame2Image", {duration: 0.5, opacity: 0})
              .from("#frame2Image2", {duration: 0.5, opacity: 0})
              .from("#cta-wrapper", {duration: 0.5, y: "50%", opacity: 0, force3D: false});
        }
        function eventListeners() {
            document.getElementById("legal-btn-wrapper").addEventListener("mouseover", legalMouseOver);
            document.getElementById("legal-close-btn").addEventListener("click", closeLegalClick);
        }
        function legalMouseOver() {
          gsap.to("#legal-text-wrapper", {duration: 0.25, y: "-100%", force3D: false});
        }
        function closeLegalClick() {
          gsap.to("#legal-text-wrapper", {duration: 0.25, y: "0%", force3D: false});
        }

        gsap.ticker.fps(30);

        window.onload = function () {
        	if (Enabler.isInitialized()) {
        		enablerInitHandler();
        	} else {
        		Enabler.addEventListener(studio.events.StudioEvent.INIT, enablerInitHandler);
        	}
        }

        function enablerInitHandler() {
        	initDynamic();
        	init();
            // this is from engineering team. this is strictly required
            var event = new CustomEvent("adinitialized");
            document.dispatchEvent(event);

        }


    </script>
</body>
</html>

